<!DOCTYPE html>
<html lang="en">
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Language" content="en">
  <meta name="google-site-verification" content="2S8M18BgYs8cLRL6ClTrfW_xGxfFtMZu2b2jhjrNlss">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>SimpleSAMLphp Documentation</title>

  <link rel="stylesheet" href="/res/css/style.css">
  <link rel="stylesheet" href="/res/css/layout.css">
</head>
<body>
<header>
 <div id="header">
  <div class="right">
   <form action="https://www.google.com/cse" method="get" style="margin-top: 2.5rem; margin-right: 2rem">
    <input name="cx" type="hidden" value="004202914224971217557:8ks4jjstupq"/>
    <input name="siteurl" type="hidden" value="www.google.com/cse/home?cx=004202914224971217557:8ks4jjstupq"/>
    <input name="adkw" type="hidden" value="AELymgVJ6Sk-kOvUjbxvgShTLwiFlma2evFuVCh0r8q23vn_4eVnkcdnPfbgMvYUTpJpVlb-KkGAKkbn0i-AlWHsVRR9O0J4CNb6cXFkEKRdjXxsC_NlVD4"/>
    <input name="q" placeholder="Search" type="search" value=""/>
   </form>
  </div>
  <div class="v-center logo-header">
   <div id="logo">
    <a href="https://simplesamlphp.org" style="color: #fff; text-decoration: none">
     <span class="simple">
      Simple
     </span>
     <span class="saml">
      SAML
     </span>
     <span class="simple">
      php
     </span>
    </a>
   </div>
  </div>
 </div>
 <!-- Grey header bar below -->
 <nav>
  <div id="headerbar" style="clear: both">
   <p id="breadcrumb">
    <a href="https://simplesamlphp.org">
     Home
    </a>
    Â» Documentation
   </p>
   <div class="mtoolbar">
    <div class="menuitem">
     <a href="/docs/1.19/index.html">
      1.19 (stable)
     </a>
    </div>
    <div class="menuitem">
     <a href="/docs/1.18/index.html">
      1.18
     </a>
    </div>
    <div class="menuitem">
     <a href="/docs/1.17/index.html">
      1.17
     </a>
    </div>
    <div class="menuitem">
     <a href="/docs/1.16/index.html">
      1.16
     </a>
    </div>
    <div class="menuitem first">
     <a href="/docs/devel/index.html">
      devel
     </a>
    </div>
    <div class="menuitem last">
     <a href="/docs/contributed_modules.html">
      Contributed modules
     </a>
    </div>
   </div>
   <br style="height: 0px; clear: both"/>
  </div>
  <!-- /#headerbar -->
 </nav>
 <div id="content">
 </div>
</header><main><h1 id="idp-hosted-metadata-reference">
 IdP hosted metadata reference
</h1>
<div class="toc">
 <ul>
  <li>
   <a href="#idp-hosted-metadata-reference">
    IdP hosted metadata reference
   </a>
   <ul>
    <li>
     <a href="#common-options">
      Common options
     </a>
    </li>
    <li>
     <a href="#saml-20-options">
      SAML 2.0 options
     </a>
     <ul>
      <li>
       <a href="#fields-for-signing-and-validating-messages">
        Fields for signing and validating messages
       </a>
      </li>
     </ul>
    </li>
    <li>
     <a href="#metadata-extensions">
      Metadata extensions
     </a>
    </li>
    <li>
     <a href="#examples">
      Examples
     </a>
     <ul>
      <li>
       <a href="#minimal-saml-20-idp">
        Minimal SAML 2.0 IdP
       </a>
      </li>
      <li>
       <a href="#a-custom-metadata-extension-edugain-republish-request">
        A custom metadata extension (eduGAIN republish request)
       </a>
      </li>
     </ul>
    </li>
   </ul>
  </li>
 </ul>
</div>
<p>
 This is a reference for the metadata file
 <code>
  metadata/saml20-idp-hosted.php
 </code>
 .
Both files have the following format:
</p>
<div class="codehilite">
 <pre><span></span><code><span class="w">  </span><span class="cp">&lt;?php</span>
  <span class="cm">/* The index of the array is the entity ID of this IdP. */</span>
  <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'entity-id-1'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
      <span class="s1">'host'</span> <span class="o">=&gt;</span> <span class="s1">'idp.example.org'</span><span class="p">,</span>
      <span class="cm">/* Configuration options for the first IdP. */</span>
  <span class="p">];</span>
  <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'entity-id-2'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
      <span class="s1">'host'</span> <span class="o">=&gt;</span> <span class="s1">'__DEFAULT__'</span><span class="p">,</span>
      <span class="cm">/* Configuration options for the default IdP. */</span>
  <span class="p">];</span>
  <span class="cm">/* ... */</span>
</code></pre>
</div>
<p>
 The entity ID must be a URI, that is unlikely to change for technical or
political reasons. We recommend it to be a domain name you own.
The URL does not have to resolve to actual content, it's
just an identifier. If your organization's domain is
 <code>
  example.org
 </code>
 :
</p>
<div class="codehilite">
 <pre><span></span><code>  https://example.org/saml-idp
</code></pre>
</div>
<p>
 For guidance in picking an entityID, see
 <a href="https://spaces.at.internet2.edu/display/federation/saml-metadata-entityid">
  InCommon's best practice
 </a>
 on the matter.
</p>
<p>
 The
 <code>
  host
 </code>
 option is the hostname of the IdP, and will be used to
select the correct configuration. One entry in the metadata-list can
have the host
 <code>
  __DEFAULT__
 </code>
 . This entry will be used when no other
entry matches.
</p>
<h2 id="common-options">
 Common options
</h2>
<dl>
 <dt>
  <code>
   auth
  </code>
 </dt>
 <dd>
  Which authentication module should be used to authenticate users on
  this IdP.
 </dd>
 <dt>
  <code>
   authproc
  </code>
 </dt>
 <dd>
  Used to manipulate attributes, and limit access for each SP. See
  the
  <a href="simplesamlphp-authproc.html">
   authentication processing filter manual
  </a>
  .
 </dd>
 <dt>
  <code>
   certificate
  </code>
 </dt>
 <dd>
  Location of certificate data which should be used by this IdP, in PEM format.
 </dd>
 <dt>
  <code>
   contacts
  </code>
 </dt>
 <dd>
  Specify contacts in addition to the technical contact configured through config/config.php.
  For example, specifying a support contact:
  <div class="codehilite">
   <pre><span></span><code><span class="s1">'contacts'</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">[</span><span class="n"></span>
<span class="n">    [</span>
<span class="n">        'contactType'       =&gt; 'support',</span>
<span class="n">        'emailAddress'      =&gt; 'support@example.org',</span>
<span class="n">        'givenName'         =&gt; 'John',</span>
<span class="n">        'surName'           =&gt; 'Doe',</span>
<span class="n">        'telephoneNumber'   =&gt; '+31(0)12345678',</span>
<span class="n">        'company'           =&gt; 'Example Inc.',</span>
<span class="n">    </span><span class="o">]</span><span class="p">,</span><span class="w"></span>
<span class="err">]</span><span class="p">,</span><span class="w"></span>
</code></pre>
  </div>
 </dd>
 <dd>
  <p>
   If you have support for a trust framework that requires extra attributes on the contact person element in your IdP metadata (for example, SIRTFI), you can specify an array of attributes on a contact.
  </p>
  <div class="codehilite">
   <pre><span></span><code><span class="s1">'contacts'</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">[</span><span class="n"></span>
<span class="n">    [</span>
<span class="n">        'contactType'       =&gt; 'other',</span>
<span class="n">        'emailAddress'      =&gt; 'mailto:abuse@example.org',</span>
<span class="n">        'givenName'         =&gt; 'John',</span>
<span class="n">        'surName'           =&gt; 'Doe',</span>
<span class="n">        'telephoneNumber'   =&gt; '+31(0)12345678',</span>
<span class="n">        'company'           =&gt; 'Example Inc.',</span>
<span class="n">        'attributes'        =&gt; [</span>
<span class="n">            'xmlns:remd'        =&gt; 'http://refeds.org/metadata',</span>
<span class="n">            'remd:contactType'  =&gt; 'http://refeds.org/metadata/contactType/security',</span>
<span class="n">        </span><span class="o">]</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="err">]</span><span class="p">,</span><span class="w"></span>
<span class="err">]</span><span class="p">,</span><span class="w"></span>
</code></pre>
  </div>
 </dd>
 <dt>
  <code>
   host
  </code>
 </dt>
 <dd>
  The hostname for this IdP. One IdP can also have the
  <code>
   host
  </code>
  -option
  set to
  <code>
   __DEFAULT__
  </code>
  , and that IdP will be used when no other
  entries in the metadata matches.
 </dd>
 <dt>
  <code>
   logouttype
  </code>
 </dt>
 <dd>
  The logout handler to use. Either
  <code>
   iframe
  </code>
  or
  <code>
   traditional
  </code>
  .
  <code>
   traditional
  </code>
  is the default.
 </dd>
 <dt>
  <code>
   OrganizationName
  </code>
  ,
  <code>
   OrganizationDisplayName
  </code>
  ,
  <code>
   OrganizationURL
  </code>
 </dt>
 <dd>
  The name and URL of the organization responsible for this IdP.
  You need to either specify
  <em>
   all three
  </em>
  or none of these options.
 </dd>
 <dd>
  The Name does not need to be suitable for display to end users, the DisplayName should be.
  The URL is a website the user can access for more information about the organization.
 </dd>
 <dd>
  This option can be translated into multiple languages by specifying the value as an array of language-code to translated name:
  <div class="codehilite">
   <pre><span></span><code>    'OrganizationName' =&gt; [
        'en' =&gt; 'Voorbeeld Organisatie Foundation b.a.',
        'nl' =&gt; 'Stichting Voorbeeld Organisatie b.a.',
    ],
    'OrganizationDisplayName' =&gt; [
        'en' =&gt; 'Example organization',
        'nl' =&gt; 'Voorbeeldorganisatie',
    ],
    'OrganizationURL' =&gt; [
        'en' =&gt; 'https://example.com',
        'nl' =&gt; 'https://example.com/nl',
    ],
</code></pre>
  </div>
 </dd>
 <dt>
  <code>
   privatekey
  </code>
 </dt>
 <dd>
  Location of private key data for this IdP, in PEM format.
 </dd>
 <dt>
  <code>
   privatekey_pass
  </code>
 </dt>
 <dd>
  Passphrase for the private key. Leave this option out if the
  private key is unencrypted.
 </dd>
 <dt>
  <code>
   scope
  </code>
 </dt>
 <dd>
  An array with scopes for this IdP.
  The scopes will be added to the generated XML metadata.
  A scope can either be a domain name or a regular expression
  matching a number of domains.
 </dd>
</dl>
<h2 id="saml-20-options">
 SAML 2.0 options
</h2>
<p>
 The following SAML 2.0 options are available:
</p>
<dl>
 <dt>
  <code>
   assertion.encryption
  </code>
 </dt>
 <dd>
  Whether assertions sent from this IdP should be encrypted. The default
  value is
  <code>
   FALSE
  </code>
  .
 </dd>
 <dd>
  Note that this option can be set for each SP in the SP-remote metadata.
 </dd>
 <dt>
  <code>
   attributeencodings
  </code>
 </dt>
 <dd>
  What encoding should be used for the different attributes. This is
  an array which maps attribute names to attribute encodings. There
  are three different encodings:
 </dd>
 <dd>
  <ul>
   <li>
    <code>
     string
    </code>
    : Will include the attribute as a normal string. This is
      the default.
   </li>
  </ul>
 </dd>
 <dd>
  <ul>
   <li>
    <code>
     base64
    </code>
    : Store the attribute as a base64 encoded string. This
      is the default when the
    <code>
     base64attributes
    </code>
    -option is set to
    <code>
     TRUE
    </code>
    .
   </li>
  </ul>
 </dd>
 <dd>
  <ul>
   <li>
    <code>
     raw
    </code>
    : Store the attribute without any modifications. This
      makes it possible to include raw XML in the response.
   </li>
  </ul>
 </dd>
 <dd>
  <p>
   Note that this option also exists in the SP-remote metadata, and
  any value in the SP-remote metadata overrides the one configured
  in the IdP metadata.
  </p>
 </dd>
 <dt>
  <code>
   attributes.NameFormat
  </code>
 </dt>
 <dd>
  What value will be set in the Format field of attribute
  statements. This parameter can be configured multiple places, and
  the actual value used is fetched from metadata by the following
  priority:
 </dd>
 <dd>
  <ol>
   <li>
    <p>
     SP Remote Metadata
    </p>
    <ol>
     <li>
      IdP Hosted Metadata
     </li>
    </ol>
   </li>
  </ol>
 </dd>
 <dd>
  <p>
   The default value is:
   <code>
    urn:oasis:names:tc:SAML:2.0:attrname-format:uri
   </code>
  </p>
 </dd>
 <dd>
  <p>
   Some examples of values specified in the SAML 2.0 Core
  Specification:
  </p>
 </dd>
 <dd>
  <ul>
   <li>
    <p>
     <code>
      urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified
     </code>
    </p>
    <ul>
     <li>
      <p>
       <code>
        urn:oasis:names:tc:SAML:2.0:attrname-format:uri
       </code>
       (The default
    in Shibboleth 2.0, mandatory as per SAML2INT)
      </p>
     </li>
     <li>
      <p>
       <code>
        urn:oasis:names:tc:SAML:2.0:attrname-format:basic
       </code>
       (The
    default in Sun Access Manager)
      </p>
     </li>
    </ul>
   </li>
  </ul>
 </dd>
 <dd>
  <p>
   You can also define your own value.
  </p>
 </dd>
 <dd>
  <p>
   Note that this option also exists in the SP-remote metadata, and
  any value in the SP-remote metadata overrides the one configured
  in the IdP metadata.
  </p>
 </dd>
 <dt>
  <code>
   encryption.blacklisted-algorithms
  </code>
 </dt>
 <dd>
  Blacklisted encryption algorithms. This is an array containing the algorithm identifiers.
 </dd>
 <dd>
  Note that this option can be set for each SP in the
  <a href="./simplesamlphp-reference-sp-remote.html">
   SP-remote metadata
  </a>
  .
 </dd>
 <dd>
  The RSA encryption algorithm with PKCS#1 v1.5 padding is blacklisted by default for security reasons. Any assertions
  encrypted with this algorithm will therefore fail to decrypt. You can override this limitation by defining an empty
  array in this option (or blacklisting any other algorithms not including that one). However, it is strongly
  discouraged to do so. For your own safety, please include the string 'http://www.w3.org/2001/04/xmlenc#rsa-1_5' if
  you make use of this option.
 </dd>
 <dt>
  <code>
   https.certificate
  </code>
 </dt>
 <dd>
  The certificate used by the webserver when handling connections.
  This certificate will be added to the generated metadata of the IdP,
  which is required by some SPs when using the HTTP-Artifact binding.
 </dd>
 <dt>
  <code>
   nameid.encryption
  </code>
 </dt>
 <dd>
  Whether NameIDs sent from this IdP should be encrypted. The default
  value is
  <code>
   FALSE
  </code>
  .
 </dd>
 <dd>
  Note that this option can be set for each SP in the
  <a href="./simplesamlphp-reference-sp-remote.html">
   SP-remote metadata
  </a>
  .
 </dd>
 <dt>
  <code>
   NameIDFormat
  </code>
 </dt>
 <dd>
  The format(s) of the NameID supported by this IdP, as either an array or a string. If an array is given, the first
  value is used as the default if the incoming request does not specify a preference. Defaults to the
  <code>
   transient
  </code>
  format if unspecified.
 </dd>
 <dd>
  This parameter can be configured in multiple places, and the actual value used is fetched from metadata with
  the following priority:
 </dd>
 <dd>
  <ol>
   <li>
    <p>
     SP Remote Metadata
    </p>
    <ol>
     <li>
      IdP Hosted Metadata
     </li>
    </ol>
   </li>
  </ol>
 </dd>
 <dd>
  <p>
   The three most commonly used values are:
  </p>
 </dd>
 <dd>
  <ol>
   <li>
    <code>
     urn:oasis:names:tc:SAML:2.0:nameid-format:transient
    </code>
    <ol>
     <li>
      <code>
       urn:oasis:names:tc:SAML:2.0:nameid-format:persistent
      </code>
     </li>
     <li>
      <code>
       urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress
      </code>
     </li>
    </ol>
   </li>
  </ol>
 </dd>
 <dd>
  <p>
   The
   <code>
    transient
   </code>
   format will generate a new unique ID every time
  the user logs in.
  </p>
 </dd>
 <dd>
  <p>
   To properly support the
   <code>
    persistent
   </code>
   and
   <code>
    emailAddress
   </code>
   formats,
  you should configure
   <a href="./saml/nameid.html">
    NameID generation filters
   </a>
   on your IdP.
  </p>
 </dd>
 <dd>
  <p>
   Note that the value(s) set here will be added to the metadata generated for this IdP,
  in the
   <code>
    NameIDFormat
   </code>
   element.
  </p>
 </dd>
 <dt>
  <code>
   RegistrationInfo
  </code>
 </dt>
 <dd>
  Allows to specify information about the registrar of this SP. Please refer to the
  <a href="./simplesamlphp-metadata-extensions-rpi.html">
   MDRPI extension
  </a>
  document for further information.
 </dd>
 <dt>
  <code>
   saml20.ecp
  </code>
 </dt>
 <dd>
  Set to
  <code>
   true
  </code>
  to enable the IdP to recieve authnrequests and send responses according the Enhanced Client or Proxy (ECP) Profile. Note: authentication filters that require interaction with the user will not work with ECP.
  Defaults to
  <code>
   false
  </code>
  .
 </dd>
 <dt>
  <code>
   saml20.hok.assertion
  </code>
 </dt>
 <dd>
  Set to
  <code>
   TRUE
  </code>
  to enable the IdP to send responses according the
  <a href="./simplesamlphp-hok-idp.html">
   Holder-of-Key Web Browser SSO Profile
  </a>
  .
  Defaults to
  <code>
   FALSE
  </code>
  .
 </dd>
 <dt>
  <code>
   saml20.sendartifact
  </code>
 </dt>
 <dd>
  Set to
  <code>
   TRUE
  </code>
  to enable the IdP to send responses with the HTTP-Artifact binding.
  Defaults to
  <code>
   FALSE
  </code>
  .
 </dd>
 <dd>
  Note that this requires a configured memcache server.
 </dd>
 <dt>
  <code>
   saml20.sign.assertion
  </code>
 </dt>
 <dd>
  Whether
  <code>
   &lt;saml:Assertion&gt;
  </code>
  elements should be signed.
  Defaults to
  <code>
   TRUE
  </code>
  .
 </dd>
 <dd>
  Note that this option also exists in the SP-remote metadata, and
  any value in the SP-remote metadata overrides the one configured
  in the IdP metadata.
 </dd>
 <dt>
  <code>
   saml20.sign.response
  </code>
 </dt>
 <dd>
  Whether
  <code>
   &lt;samlp:Response&gt;
  </code>
  messages should be signed.
  Defaults to
  <code>
   TRUE
  </code>
  .
 </dd>
 <dd>
  Note that this option also exists in the SP-remote metadata, and
  any value in the SP-remote metadata overrides the one configured
  in the IdP metadata.
 </dd>
 <dt>
  <code>
   signature.algorithm
  </code>
 </dt>
 <dd>
  The algorithm to use when signing any message generated by this identity provider. Defaults to RSA-SHA256.
 </dd>
 <dd>
  Possible values:
  <div class="codehilite">
   <pre><span></span><code>* `http://www.w3.org/2000/09/xmldsig#rsa-sha1`
   *Note*: the use of SHA1 is **deprecated** and will be disallowed in the future.
* `http://www.w3.org/2001/04/xmldsig-more#rsa-sha256`
   The default.
* `http://www.w3.org/2001/04/xmldsig-more#rsa-sha384`
* `http://www.w3.org/2001/04/xmldsig-more#rsa-sha512`
</code></pre>
  </div>
 </dd>
 <dt>
  <code>
   sign.logout
  </code>
 </dt>
 <dd>
  Whether to sign logout messages sent from this IdP.
 </dd>
 <dd>
  Note that this option also exists in the SP-remote metadata, and
  any value in the SP-remote metadata overrides the one configured
  in the IdP metadata.
 </dd>
 <dt>
  <code>
   SingleSignOnService
  </code>
 </dt>
 <dd>
  Override the default URL for the SingleSignOnService for this
  IdP. This is an absolute URL. The default value is
  <code>
   &lt;SimpleSAMLphp-root&gt;/saml2/idp/SSOService.php
  </code>
 </dd>
 <dd>
  Note that this only changes the values in the generated
  metadata and in the messages sent to others. You must also
  configure your webserver to deliver this URL to the correct PHP
  page.
 </dd>
 <dt>
  <code>
   SingleSignOnServiceBinding
  </code>
 </dt>
 <dd>
  List of SingleSignOnService bindings that the IdP will claim support for.
 </dd>
 <dd>
  <p>
   Possible values:
  </p>
  <ul>
   <li>
    <code>
     urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect
    </code>
   </li>
   <li>
    <code>
     urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST
    </code>
   </li>
  </ul>
 </dd>
 <dd>
  <p>
   Defaults to HTTP-Redirect binding. Please note that the order
  specified will be kept in the metadata, making the first binding
  the default one.
  </p>
 </dd>
 <dt>
  <code>
   SingleLogoutService
  </code>
 </dt>
 <dd>
  Override the default URL for the SingleLogoutService for this
  IdP. This is an absolute URL. The default value is
  <code>
   &lt;SimpleSAMLphp-root&gt;/saml2/idp/SingleLogoutService.php
  </code>
 </dd>
 <dd>
  Note that this only changes the values in the generated
  metadata and in the messages sent to others. You must also
  configure your webserver to deliver this URL to the correct PHP
  page.
 </dd>
 <dt>
  <code>
   SingleLogoutServiceBinding
  </code>
 </dt>
 <dd>
  List of SingleLogoutService bindings the IdP will claim support for.
 </dd>
 <dd>
  <p>
   Possible values:
  </p>
  <ul>
   <li>
    <code>
     urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect
    </code>
   </li>
   <li>
    <code>
     urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST
    </code>
   </li>
  </ul>
 </dd>
 <dd>
  <p>
   Defaults to HTTP-Redirect binding. Please note that the order
  specified will be kept in the metadata, making the first binding
  the default one.
  </p>
 </dd>
 <dt>
  <code>
   validate.authnrequest
  </code>
 </dt>
 <dd>
  Whether we require signatures on authentication requests sent to this IdP.
  Set it to:
  <div class="codehilite">
   <pre><span></span><code><span class="kc">true</span><span class="o">:</span><span class="w"> </span><span class="n">authnrequest</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">signed</span><span class="w"> </span><span class="o">(</span><span class="n">and</span><span class="w"> </span><span class="n">signature</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">validated</span><span class="o">)</span><span class="w"></span>
<span class="kc">null</span><span class="o">:</span><span class="w"> </span><span class="n">authnrequest</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">signed</span><span class="o">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="k">is</span><span class="o">,</span><span class="w"> </span><span class="n">signature</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">validated</span><span class="w"></span>
<span class="kc">false</span><span class="o">:</span><span class="w"> </span><span class="n">authnrequest</span><span class="w"> </span><span class="n">signature</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">never</span><span class="w"> </span><span class="n">checked</span><span class="w"></span>
</code></pre>
  </div>
 </dd>
 <dd>
  <p>
   Note that this option also exists in the SP-remote metadata, and
  any value in the SP-remote metadata overrides the one configured
  in the IdP metadata.
  </p>
 </dd>
 <dt>
  <code>
   validate.logout
  </code>
 </dt>
 <dd>
  Whether we require signatures on logout messages sent to this IdP.
 </dd>
 <dd>
  Note that this option also exists in the SP-remote metadata, and
  any value in the SP-remote metadata overrides the one configured
  in the IdP metadata.
 </dd>
</dl>
<h3 id="fields-for-signing-and-validating-messages">
 Fields for signing and validating messages
</h3>
<p>
 SimpleSAMLphp only signs authentication responses by default.
Signing of logout requests and logout responses can be enabled by
setting the
 <code>
  redirect.sign
 </code>
 option. Validation of received messages
can be enabled by the
 <code>
  redirect.validate
 </code>
 option.
</p>
<p>
 These options set the default for this IdP, but options for each SP
can be set in
 <code>
  saml20-sp-remote
 </code>
 . Note that you need to add a
certificate for each SP to be able to validate signatures on
messages from that SP.
</p>
<dl>
 <dt>
  <code>
   redirect.sign
  </code>
 </dt>
 <dd>
  Whether logout requests and logout responses sent from this IdP
  should be signed. The default is
  <code>
   FALSE
  </code>
  .
 </dd>
 <dt>
  <code>
   redirect.validate
  </code>
 </dt>
 <dd>
  Whether authentication requests, logout requests and logout
  responses received sent from this IdP should be validated. The
  default is
  <code>
   FALSE
  </code>
 </dd>
</dl>
<p>
 <strong>
  Example: Configuration for signed messages
 </strong>
</p>
<div class="codehilite">
 <pre><span></span><code>   'redirect.sign' =&gt; true,
</code></pre>
</div>
<h2 id="metadata-extensions">
 Metadata extensions
</h2>
<p>
 SimpleSAMLphp supports generating metadata with the MDUI, MDRPI and EntityAttributes metadata extensions.
See the documentation for those extensions for more details:
</p>
<div class="codehilite">
 <pre><span></span><code><span class="o">*</span><span class="w"> </span><span class="p">[</span><span class="n">MDUI</span><span class="w"> </span><span class="n">extension</span><span class="p">](.</span><span class="o">/</span><span class="n">simplesamlphp</span><span class="o">-</span><span class="n">metadata</span><span class="o">-</span><span class="n">extensions</span><span class="o">-</span><span class="n">ui</span><span class="p">)</span><span class="w"></span>
<span class="o">*</span><span class="w"> </span><span class="p">[</span><span class="n">MDRPI</span><span class="w"> </span><span class="n">extension</span><span class="p">](.</span><span class="o">/</span><span class="n">simplesamlphp</span><span class="o">-</span><span class="n">metadata</span><span class="o">-</span><span class="n">extensions</span><span class="o">-</span><span class="n">rpi</span><span class="p">)</span><span class="w"></span>
<span class="o">*</span><span class="w"> </span><span class="p">[</span><span class="n">EntityAttributes</span><span class="p">](.</span><span class="o">/</span><span class="n">simplesamlphp</span><span class="o">-</span><span class="n">metadata</span><span class="o">-</span><span class="n">extensions</span><span class="o">-</span><span class="n">attributes</span><span class="p">)</span><span class="w"></span>
</code></pre>
</div>
<p>
 For other metadata extensions, you can use the
 <code>
  saml:Extensions
 </code>
 option:
</p>
<dl>
 <dt>
  <code>
   saml:Extensions
  </code>
 </dt>
 <dd>
  An array of
  <code>
   \SAML2\XML\Chunk
  </code>
  s to include in the IdP metadata extensions, at the same level as
  <code>
   EntityAttributes
  </code>
  .
 </dd>
</dl>
<h2 id="examples">
 Examples
</h2>
<p>
 These are some examples of IdP metadata
</p>
<h3 id="minimal-saml-20-idp">
 Minimal SAML 2.0 IdP
</h3>
<div class="codehilite">
 <pre><span></span><code><span class="w">  </span><span class="cp">&lt;?php</span>

  <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'https://example.org/saml-idp'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
      <span class="cm">/*</span>
<span class="cm">       * We use '__DEFAULT__' as the hostname so we won't have to</span>
<span class="cm">       * enter a hostname.</span>
<span class="cm">       */</span>
      <span class="s1">'host'</span> <span class="o">=&gt;</span> <span class="s1">'__DEFAULT__'</span><span class="p">,</span>

      <span class="cm">/* The private key and certificate used by this IdP. */</span>
      <span class="s1">'certificate'</span> <span class="o">=&gt;</span> <span class="s1">'example.org.crt'</span><span class="p">,</span>
      <span class="s1">'privatekey'</span> <span class="o">=&gt;</span> <span class="s1">'example.org.pem'</span><span class="p">,</span>

      <span class="cm">/*</span>
<span class="cm">       * The authentication source for this IdP. Must be one</span>
<span class="cm">       * from config/authsources.php.</span>
<span class="cm">       */</span>
      <span class="s1">'auth'</span> <span class="o">=&gt;</span> <span class="s1">'example-userpass'</span><span class="p">,</span>
  <span class="p">];</span>
</code></pre>
</div>
<h3 id="a-custom-metadata-extension-edugain-republish-request">
 A custom metadata extension (eduGAIN republish request)
</h3>
<div class="codehilite">
 <pre><span></span><code><span class="cp">&lt;?php</span>

<span class="nv">$dom</span> <span class="o">=</span> <span class="nx">\SAML2\DOMDocumentFactory</span><span class="o">::</span><span class="na">create</span><span class="p">();</span>
<span class="nv">$republishRequest</span> <span class="o">=</span> <span class="nv">$dom</span><span class="o">-&gt;</span><span class="na">createElementNS</span><span class="p">(</span><span class="s1">'http://eduid.cz/schema/metadata/1.0'</span><span class="p">,</span> <span class="s1">'eduidmd:RepublishRequest'</span><span class="p">);</span>
<span class="nv">$republishTarget</span> <span class="o">=</span> <span class="nv">$dom</span><span class="o">-&gt;</span><span class="na">createElementNS</span><span class="p">(</span><span class="s1">'http://eduid.cz/schema/metadata/1.0'</span><span class="p">,</span> <span class="s1">'eduidmd:RepublishTarget'</span><span class="p">,</span> <span class="s1">'http://edugain.org/'</span><span class="p">);</span>
<span class="nv">$republishRequest</span><span class="o">-&gt;</span><span class="na">appendChild</span><span class="p">(</span><span class="nv">$republishTarget</span><span class="p">);</span>
<span class="nv">$ext</span> <span class="o">=</span> <span class="p">[</span><span class="k">new</span> <span class="nx">\SAML2\XML\Chunk</span><span class="p">(</span><span class="nv">$republishRequest</span><span class="p">)];</span>

<span class="nv">$metadata</span><span class="p">[</span><span class="s1">'https://example.org/saml-idp'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'host'</span> <span class="o">=&gt;</span> <span class="s1">'__DEFAULT__'</span><span class="p">,</span>
    <span class="s1">'certificate'</span> <span class="o">=&gt;</span> <span class="s1">'example.org.crt'</span><span class="p">,</span>
    <span class="s1">'privatekey'</span> <span class="o">=&gt;</span> <span class="s1">'example.org.pem'</span><span class="p">,</span>
    <span class="s1">'auth'</span> <span class="o">=&gt;</span> <span class="s1">'example-userpass'</span><span class="p">,</span>

    <span class="cm">/*</span>
<span class="cm">     * The custom metadata extensions.</span>
<span class="cm">     */</span>
    <span class="s1">'saml:Extensions'</span> <span class="o">=&gt;</span> <span class="nv">$ext</span><span class="p">,</span>
<span class="p">];</span>
</code></pre>
</div>
<p>
 this generates the following metadata:
</p>
<div class="codehilite">
 <pre><span></span><code><span class="nt">&lt;EntityDescriptor</span> <span class="na">entityID=</span><span class="s">"..."</span><span class="nt">&gt;</span>
  <span class="nt">&lt;Extensions</span> <span class="na">xmlns=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:metadata"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;eduidmd:RepublishRequest</span> <span class="na">xmlns:eduidmd=</span><span class="s">"http://eduid.cz/schema/metadata/1.0"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;eduidmd:RepublishTarget&gt;</span>http://edugain.org/<span class="nt">&lt;/eduidmd:RepublishTarget&gt;</span>
    <span class="nt">&lt;/eduidmd:RepublishRequest&gt;</span>
  <span class="nt">&lt;/Extensions&gt;</span>
  <span class="cm">&lt;!-- rest of metadata --&gt;</span>
<span class="nt">&lt;/EntityDescriptor&gt;</span>
</code></pre>
</div></main></body>
</html>
