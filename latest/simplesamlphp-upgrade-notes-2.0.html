<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta http-equiv="Content-Language" content="en" />

	<!-- JQuery -->
	<!-- 
	<script type="text/javascript" src="/res/js/jquery.js"></script>
	<script type="text/javascript" src="/res/js/jquery-ui.js"></script>
	-->

	<style>
	  mark {
        background: orange;
        color: black;
      }
    </style>  

	
	<!-- Foodle: CSS -->	
	<link rel="stylesheet" media="screen" type="text/css" href="/res/js/uitheme/jquery-ui-themeroller.css" /> 
	<link rel="stylesheet" media="screen" type="text/css" href="/res/css/style.css" /> 
	<link rel="stylesheet" media="screen" type="text/css" href="/res/css/layout.css" /> 

	<title>SimpleSAMLphp Documentation</title> 
</head>





<body><!-- Red logo header --><div id="header">	<div id="logo"><a href="https://simplesamlphp.org" style="color: #fff; text-decoration: none" target="_blank">SimpleSAMLphp</a></div></div><!-- Grey header bar below --><div id="headerbar" style="clear: both"><div id="langbar" style="clar: both"><div id="navigation">Documentation is available for the following versions: <a href="./../latest/index.html">latest</a> | <a href="./../1.19/index.html">1.19</a> | <a href="./../1.18/index.html">1.18</a> | <a href="./../1.17/index.html">1.17</a> |  <a href="./../contributed_modules.html"> Contributed modules</a></div></div><br style="height: 0px; clear: both" /></div><!-- /#headerbar --><div id="content"><h1>
 Upgrade notes for SimpleSAMLphp 2.0
</h1>
<p>
 SimpleSAMLphp 2.0 is a major new release which has cleaned up support for a
lot of things that have been marked deprecated in previous SimpleSAMLphp
releases. The following changes are relevant for installers and/or developers.
</p>
<h2>
 Software requirements
</h2>
<ul>
 <li>
  The minimum PHP version required is now PHP 7.4.
 </li>
 <li>
  Dropped support for Symfony 4 and Twig 2.
 </li>
</ul>
<h2>
 Not all modules included by default
</h2>
<p>
 The set of modules included in the base installation has been reduced.
If you used some of the modules that were shipped with SimpleSAMLphp, you now have to manually install them using Composer.
For example, to use the LDAP module:
</p>
<pre><code>composer require simplesamlphp/simplesamlphp-module-ldap --update-no-dev
</code></pre>
<h2>
 Functional changes
</h2>
<ul>
 <li>
  Modules must be enabled through the
  <code>
   module.enable
  </code>
  option in
  <code>
   config.php
  </code>
  . Modules can no longer be enabled by having
  a file named
  <code>
   enable
  </code>
  or
  <code>
   default-enable
  </code>
  in the module's root directory.
 </li>
 <li>
  SAML AuthnRequests that are signed will have their signature validated unless specifically disabled
  by setting
  <code>
   validate.authnrequest
  </code>
  to
  <code>
   false
  </code>
  . If unset (or set to true) signatures will be
  validated if present and requests not passing validation will be refused.
 </li>
 <li>
  In the  core:TargetedID authproc-filter, the
  <code>
   attributename
  </code>
  setting has been renamed to
  <code>
   identifyingAttribute
  </code>
  .
 </li>
 <li>
  The default encryption algorithm is set from
  <code>
   AES128_CBC
  </code>
  to
  <code>
   AES128_GCM
  </code>
  .
  It is possible to switch back via the
  <code>
   sharedkey_algorithm
  </code>
  . Note however that CBC is vulnerable to the Padding oracle attack.
 </li>
 <li>
  All support for the Shibboleth 1.3 / SAML 1.1 protocol has been removed.
 </li>
 <li>
  Configuration options have been removed:
  <ul>
   <li>
    languages[priorities]
   </li>
   <li>
    attributes.extradictionaries. Add an attributes.po to your configured theme instead.
   </li>
  </ul>
 </li>
</ul>
<h2>
 Changes relevant for (module) developers
</h2>
<p>
 The following changes are relevant for those having custom developed modules, authentication
processing filters or interface with the SimpleSAMLphp development API.
</p>
<ul>
 <li>
  Old JSON-formatted dictionaries have been replaced by gettext / .po-files;
    You can find a migration guide here: https://github.com/simplesamlphp/simplesamlphp/wiki/Migrating-translations-(pre-migration)
 </li>
 <li>
  Old PHP templates have been replaced by Twig-templates; you can find a migration
    guide here: https://github.com/simplesamlphp/simplesamlphp/wiki/Twig:-Migrating-templates
 </li>
 <li>
  The source was completely typehinted; if you have custom authsources or authproc filters, 
    make sure you change them to reflect the method signatures of the base classes.
 </li>
 <li>
  If you're using the core:TargetedID authproc-filter, note that the
  <code>
   attributename
  </code>
  setting has been renamed to
  <code>
   identifyingAttribute
  </code>
  .
 </li>
 <li>
  <p>
   The following classes have been migrated to non-static:
  </p>
  <ul>
   <li>
    \SimpleSAML\Utils\Arrays
   </li>
   <li>
    \SimpleSAML\Utils\Attributes
   </li>
   <li>
    \SimpleSAML\Utils\Auth
   </li>
   <li>
    \SimpleSAML\Utils\Config
   </li>
   <li>
    \SimpleSAML\Utils\Crypto
   </li>
   <li>
    \SimpleSAML\Utils\EMail
   </li>
   <li>
    \SimpleSAML\Utils\HTTP
   </li>
   <li>
    \SimpleSAML\Utils\Net
   </li>
   <li>
    \SimpleSAML\Utils\Random
   </li>
   <li>
    \SimpleSAML\Utils\System
   </li>
   <li>
    \SimpleSAML\Utils\Time
   </li>
   <li>
    \SimpleSAML\Utils\XML
   </li>
  </ul>
  <p>
   If you use any of these classes in your modules or themes, you will now have to instantiate them so that:
  </p>
  <p>
   // Old style
$x = \SimpleSAML\Utils\Arrays::arrayize($someVar)
  </p>
  <p>
   becomes:
  </p>
  <p>
   // New style
$arrayUtils = new \SimpleSAML\Utils\Arrays();
$x = $arrayUtils-&gt;arrayize($someVar);
  </p>
 </li>
 <li>
  <p>
   Database table schemes have been flattened. Upgrade paths are:
  </p>
  <ul>
   <li>
    Generic KVStore:  1.16+ &gt; 2.0
   </li>
   <li>
    Logout store:     1.18+ &gt; 2.0
   </li>
  </ul>
 </li>
 <li>
  <p>
   Data stores have been refactored:
  </p>
  <ul>
   <li>
    lib/SimpleSAML/Store.php has been renamed to lib/SimpleSAML/Store/StoreFactory.php and is now solely a Factory-class
   </li>
   <li>
    All store implementations now implement \SimpleSAML\Store\StoreInterface:
    <ul>
     <li>
      lib/SimpleSAML/Store/SQL.php has been renamed to lib/SimpleSAML/Store/SQLStore.php
     </li>
     <li>
      lib/SimpleSAML/Store/Memcache.php has been renamed to lib/SimpleSAML/Store/MemcacheStore.php
     </li>
     <li>
      lib/SimpleSAML/Store/Redis.php has been renamed to lib/SimpleSAML/Store/RedisStore.php
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul></div>    <!-- /#content -->

<div id="footer">
    <a href="https://www.uninett.no/"><img id="ulogo" alt="notes" src="/res/uninettlogo.png" /SS></a>
</div><!-- /#footer -->

</body>
</html>
