<!DOCTYPE html>
<html lang="en">
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Language" content="en">
  <meta name="google-site-verification" content="2S8M18BgYs8cLRL6ClTrfW_xGxfFtMZu2b2jhjrNlss">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>SimpleSAMLphp Documentation</title>

  <link rel="stylesheet" href="/res/css/style.css">
  <link rel="stylesheet" href="/res/css/layout.css">
</head>
<body>
<header>
 <div id="header">
  <div class="right">
   <form action="https://www.google.com/cse" method="get" style="margin-top: 2.5rem; margin-right: 2rem">
    <input name="cx" type="hidden" value="004202914224971217557:8ks4jjstupq"/>
    <input name="siteurl" type="hidden" value="www.google.com/cse/home?cx=004202914224971217557:8ks4jjstupq"/>
    <input name="adkw" type="hidden" value="AELymgVJ6Sk-kOvUjbxvgShTLwiFlma2evFuVCh0r8q23vn_4eVnkcdnPfbgMvYUTpJpVlb-KkGAKkbn0i-AlWHsVRR9O0J4CNb6cXFkEKRdjXxsC_NlVD4"/>
    <input name="q" placeholder="Search" type="search" value=""/>
   </form>
  </div>
  <div class="v-center logo-header">
   <div id="logo">
    <a href="https://simplesamlphp.org" style="color: #fff; text-decoration: none">
     <span class="simple">
      Simple
     </span>
     <span class="saml">
      SAML
     </span>
     <span class="simple">
      php
     </span>
    </a>
   </div>
  </div>
 </div>
 <!-- Grey header bar below -->
 <nav>
  <div id="headerbar" style="clear: both">
   <p id="breadcrumb">
    <a href="https://simplesamlphp.org">
     Home
    </a>
    Â» Documentation
   </p>
   <div class="mtoolbar">
    <div class="menuitem">
     <a href="/docs/2.0/index.html">
      2.0 (stable)
     </a>
    </div>
    <div class="menuitem">
     <a href="/docs/1.19/index.html">
      1.19
     </a>
    </div>
    <div class="menuitem first">
     <a href="/docs/devel/index.html">
      devel
     </a>
    </div>
    <div class="menuitem last">
     <a href="/docs/contributed_modules.html">
      Contributed modules
     </a>
    </div>
   </div>
   <br style="height: 0px; clear: both"/>
  </div>
  <!-- /#headerbar -->
 </nav>
 <div id="content">
 </div>
</header>
<main><h1 id="idp-remote-metadata-reference">
 IdP remote metadata reference
</h1>
<div class="toc">
 <ul>
  <li>
   <a href="#idp-remote-metadata-reference">
    IdP remote metadata reference
   </a>
   <ul>
    <li>
     <a href="#options">
      Options
     </a>
     <ul>
      <li>
       <a href="#decrypting-assertions">
        Decrypting assertions
       </a>
      </li>
      <li>
       <a href="#fields-for-signing-and-validating-messages">
        Fields for signing and validating messages
       </a>
      </li>
     </ul>
    </li>
   </ul>
  </li>
 </ul>
</div>
<p>
 This is a reference for metadata options available for
 <code>
  metadata/saml20-idp-remote.php
 </code>
 . The file has the following format:
</p>
<div class="highlight">
 <pre><span></span><code><span class="cp">&lt;?php</span>
<span class="cm">/* The index of the array is the entity ID of this IdP. */</span>
<span class="nv">$metadata</span><span class="p">[</span><span class="s1">'entity-id-1'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="cm">/* Configuration options for the first IdP. */</span>
<span class="p">];</span>
<span class="nv">$metadata</span><span class="p">[</span><span class="s1">'entity-id-2'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="cm">/* Configuration options for the second IdP. */</span>
<span class="p">];</span>
<span class="cm">/* ... */</span>
</code></pre>
</div>
<h2 id="options">
 Options
</h2>
<dl>
 <dt>
  <code>
   AuthnContextClassRef
  </code>
 </dt>
 <dd>
  The AuthnContextClassRef that will be sent in the login request.
 </dd>
 <dd>
  Note that this option also exists in the SP configuration. This
  entry in the IdP-remote metadata overrides the option in the
  <a href="./saml/sp.html">
   SP configuration
  </a>
  .
 </dd>
 <dt>
  <code>
   AuthnContextComparison
  </code>
 </dt>
 <dd>
  <p>
   The Comparison attribute of the AuthnContext that will be sent in the login request. This parameter won't be used unless AuthnContextClassRef is set and contains one or more values. Possible values:
  </p>
 </dd>
</dl>
<ul>
 <li>
  SAML2\Constants::COMPARISON_EXACT (default)
 </li>
 <li>
  SAML2\Constants::COMPARISON_BETTER
 </li>
 <li>
  SAML2\Constants::COMPARISON_MINIMUM
 </li>
 <li>
  SAML2\Constants::COMPARISON_MAXIMUM
 </li>
</ul>
<dl>
 <dd>
  Note that this option also exists in the SP configuration. This
  entry in the IdP-remote metadata overrides the option in the
  <a href="./saml/sp.html">
   SP configuration
  </a>
  .
 </dd>
 <dt>
  <code>
   authproc
  </code>
 </dt>
 <dd>
  Used to manipulate attributes, and limit access for each IdP. See the
  <a href="simplesamlphp-authproc.html">
   authentication processing filter manual
  </a>
  .
 </dd>
 <dt>
  <code>
   base64attributes
  </code>
 </dt>
 <dd>
  Whether attributes received from this IdP should be base64 decoded. The default is
  <code>
   FALSE
  </code>
  .
 </dd>
 <dt>
  <code>
   certData
  </code>
 </dt>
 <dd>
  The base64 encoded certificate for this IdP. This is an alternative to storing the certificate in a file on disk and specifying the filename in the
  <code>
   certificate
  </code>
  -option.
 </dd>
 <dt>
  <code>
   certificate
  </code>
 </dt>
 <dd>
  Location of certificate data for this IdP.
 </dd>
 <dt>
  <code>
   description
  </code>
 </dt>
 <dd>
  A description of this IdP. Will be used by various modules when they need to show a description of the IdP to the user.
 </dd>
 <dd>
  This option can be translated into multiple languages in the same way as the
  <code>
   name
  </code>
  -option.
 </dd>
 <dt>
  <code>
   disable_scoping
  </code>
 </dt>
 <dd>
  Whether sending of samlp:Scoping elements in authentication requests should be suppressed. The default value is
  <code>
   FALSE
  </code>
  .
  When set to
  <code>
   TRUE
  </code>
  , no scoping elements will be sent. This does not comply with the SAML2 specification, but allows
  interoperability with ADFS which
  <a href="https://docs.microsoft.com/en-za/azure/active-directory/develop/active-directory-single-sign-on-protocol-reference#scoping">
   does not support Scoping elements
  </a>
  .
 </dd>
 <dd>
  Note that this option also exists in the SP configuration. This
  entry in the IdP-remote metadata overrides the option in the
  <a href="./saml/sp.html">
   SP configuration
  </a>
  .
 </dd>
 <dt>
  <code>
   encryption.blacklisted-algorithms
  </code>
 </dt>
 <dd>
  Blacklisted encryption algorithms. This is an array containing the algorithm identifiers.
 </dd>
 <dd>
  Note that this option also exists in the SP configuration. This
  entry in the IdP-remote metadata overrides the option in the
  <a href="./saml/sp.html">
   SP configuration
  </a>
  .
 </dd>
 <dd>
  The RSA encryption algorithm with PKCS#1 v1.5 padding is blacklisted by default for security reasons. Any assertions
  encrypted with this algorithm will therefore fail to decrypt. You can override this limitation by defining an empty
  array in this option (or blacklisting any other algorithms not including that one). However, it is strongly
  discouraged to do so. For your own safety, please include the string 'http://www.w3.org/2001/04/xmlenc#rsa-1_5' if
  you make use of this option.
 </dd>
 <dt>
  <code>
   hide.from.discovery
  </code>
 </dt>
 <dd>
  Whether to hide hide this IdP from the local discovery or not. Set to true to hide it. Defaults to false.
 </dd>
 <dt>
  <code>
   icon
  </code>
 </dt>
 <dd>
  A logo which will be shown next to this IdP in the discovery service.
 </dd>
 <dt>
  <code>
   IDPList
  </code>
 </dt>
 <dd>
  The IdP is allowed to respond to an
  <code>
   AuthNRequest
  </code>
  originally sent to entityIDs in this list.
 </dd>
 <dt>
  <code>
   name
  </code>
 </dt>
 <dd>
  The name of this IdP. Will be used by various modules when they need to show a name of the SP to the user.
 </dd>
 <dd>
  If this option is unset, the organization name will be used instead (if it is available).
 </dd>
 <dd>
  This option can be translated into multiple languages by specifying the value as an array of language-code to translated name:
 </dd>
</dl>
<div class="highlight">
 <pre><span></span><code><span class="x">'name' =&gt; [</span>
<span class="x">    'en' =&gt; 'A service',</span>
<span class="x">    'no' =&gt; 'En tjeneste',</span>
<span class="x">],</span>
</code></pre>
</div>
<dl>
 <dt>
  <code>
   nameid.encryption
  </code>
 </dt>
 <dd>
  Whether NameIDs sent to this IdP should be encrypted. The default
  value is
  <code>
   FALSE
  </code>
  .
 </dd>
 <dd>
  Note that this option also exists in the SP configuration. This
  entry in the IdP-remote metadata overrides the option in the
  <a href="./saml/sp.html">
   SP configuration
  </a>
  .
 </dd>
 <dt>
  <code>
   NameIDPolicy
  </code>
 </dt>
 <dd>
  The format of the NameID we request from this IdP: an array in the form of
  <code>
   [ 'Format' =&gt; the format, 'AllowCreate' =&gt; true or false ]
  </code>
  .
  Set to an empty array
  <code>
   []
  </code>
  to omit sending any specific NameIDPolicy element
  in the AuthnRequest. When the entire option or either array key is unset,
  the defaults are transient and true respectively.
 </dd>
 <dt>
  <code>
   OrganizationName
  </code>
 </dt>
 <dd>
  The name of the organization responsible for this SPP.
  This name does not need to be suitable for display to end users.
 </dd>
 <dd>
  This option can be translated into multiple languages by specifying the value as an array of language-code to translated name:
 </dd>
 <dt>
  <div class="highlight">
   <pre><span></span><code><span class="x">'OrganizationName' =&gt; [</span>
<span class="x">    'en' =&gt; 'Example organization',</span>
<span class="x">    'no' =&gt; 'Eksempel organisation',</span>
<span class="x">],</span>
</code></pre>
  </div>
 </dt>
 <dd>
  <p>
   <em>
    Note
   </em>
   : If you specify this option, you must also specify the
   <code>
    OrganizationURL
   </code>
   option.
  </p>
 </dd>
 <dt>
  <code>
   OrganizationDisplayName
  </code>
 </dt>
 <dd>
  The name of the organization responsible for this IdP.
  This name must be suitable for display to end users.
  If this option isn't specified,
  <code>
   OrganizationName
  </code>
  will be used instead.
 </dd>
 <dd>
  This option can be translated into multiple languages by specifying the value as an array of language-code to translated name.
 </dd>
 <dd>
  <em>
   Note
  </em>
  : If you specify this option, you must also specify the
  <code>
   OrganizationName
  </code>
  option.
 </dd>
 <dt>
  <code>
   OrganizationURL
  </code>
 </dt>
 <dd>
  A URL the end user can access for more information about the organization.
 </dd>
 <dd>
  This option can be translated into multiple languages by specifying the value as an array of language-code to translated URL.
 </dd>
 <dd>
  <em>
   Note
  </em>
  : If you specify this option, you must also specify the
  <code>
   OrganizationName
  </code>
  option.
 </dd>
 <dt>
  <code>
   scope
  </code>
 </dt>
 <dd>
  An array with scopes valid for this IdP.
  The IdP will send scopes in scoped attributes, that is, attributes containing a value with an
  <code>
   @
  </code>
  sign and a domain name
  after it.
 </dd>
 <dd>
  When the
  <code>
   saml:FilterScopes
  </code>
  authentication processing filter is used, this list of scopes will determine the valid
  scopes for attributes.
 </dd>
 <dt>
  <code>
   signature.algorithm
  </code>
 </dt>
 <dd>
  The algorithm to use when signing any message sent to this specific identity provider. Defaults to RSA-SHA256.
 </dd>
 <dd>
  Note that this option also exists in the SP configuration.
  This value in the IdP remote metadata overrides the value in the SP configuration.
 </dd>
 <dd>
  Possible values:
 </dd>
</dl>
<ul>
 <li>
  <code>
   http://www.w3.org/2000/09/xmldsig#rsa-sha1
  </code>
  <em>
   Note
  </em>
  : the use of SHA1 is
  <strong>
   deprecated
  </strong>
  and will be disallowed in the future.
 </li>
 <li>
  <code>
   http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
  </code>
  The default.
 </li>
 <li>
  <code>
   http://www.w3.org/2001/04/xmldsig-more#rsa-sha384
  </code>
 </li>
 <li>
  <code>
   http://www.w3.org/2001/04/xmldsig-more#rsa-sha512
  </code>
 </li>
</ul>
<dl>
 <dt>
  <code>
   sign.authnrequest
  </code>
 </dt>
 <dd>
  Whether to sign authentication requests sent to this IdP.
 </dd>
 <dd>
  Note that this option also exists in the SP configuration.
  This value in the IdP remote metadata overrides the value in the SP configuration.
 </dd>
 <dt>
  <code>
   sign.logout
  </code>
 </dt>
 <dd>
  Whether to sign logout messages sent to this IdP.
 </dd>
 <dd>
  Note that this option also exists in the SP configuration.
  This value in the IdP remote metadata overrides the value in the SP configuration.
 </dd>
 <dt>
  <code>
   SingleLogoutService
  </code>
 </dt>
 <dd>
  Endpoint URL for logout requests and responses. You should obtain this from the IdP. Users who log out from your service is redirected to this URL with the LogoutRequest using HTTP-REDIRECT.
 </dd>
 <dd>
  The value of this option is specified in one of several
  <a href="./simplesamlphp-metadata-endpoints.html">
   endpoint formats
  </a>
  .
 </dd>
 <dt>
  <code>
   SingleLogoutServiceResponse
  </code>
 </dt>
 <dd>
  Endpoint URL for logout responses. Overrides the
  <code>
   SingleLogoutService
  </code>
  -option for responses.
 </dd>
 <dt>
  <code>
   SingleSignOnService
  </code>
 </dt>
 <dd>
  Endpoint URL for sign on. You should obtain this from the IdP. For SAML 2.0, SimpleSAMLphp will use the HTTP-Redirect binding when contacting this endpoint.
 </dd>
 <dd>
  The value of this option is specified in one of several
  <a href="./simplesamlphp-metadata-endpoints.html">
   endpoint formats
  </a>
  .
 </dd>
 <dt>
  <code>
   SPNameQualifier
  </code>
 </dt>
 <dd>
  This corresponds to the SPNameQualifier in the SAML 2.0 specification. It allows to give subjects a SP specific namespace. This option is rarely used, so if you don't need it, leave it out. When left out, SimpleSAMLphp assumes the entityID of your SP as the SPNameQualifier.
 </dd>
 <dt>
  <code>
   validate.logout
  </code>
 </dt>
 <dd>
  Whether we require signatures on logout messages sent from this IdP.
 </dd>
 <dd>
  Note that this option also exists in the SP configuration.
  This value in the IdP remote metadata overrides the value in the SP configuration.
 </dd>
</dl>
<h3 id="decrypting-assertions">
 Decrypting assertions
</h3>
<p>
 It is possible to decrypt the assertions received from an IdP. Currently the only algorithm supported is
 <code>
  AES128_CBC
 </code>
 or
 <code>
  RIJNDAEL_128
 </code>
 .
</p>
<p>
 There are two modes of encryption supported by SimpleSAMLphp. One is symmetric encryption, in which case both the SP and the IdP needs to share a key. The other mode is the use of public key encryption. In that mode, the public key of the SP is extracted from the certificate of the SP.
</p>
<dl>
 <dt>
  <code>
   assertion.encryption
  </code>
 </dt>
 <dd>
  Whether assertions received from this IdP must be encrypted. The default value is
  <code>
   FALSE
  </code>
  .
  If this option is set to
  <code>
   TRUE
  </code>
  , assertions from the IdP must be encrypted.
  Unencrypted assertions will be rejected.
 </dd>
 <dd>
  Note that this option overrides the option with the same name in the SP configuration.
 </dd>
 <dt>
  <code>
   sharedkey
  </code>
 </dt>
 <dd>
  Symmetric key which should be used for decryption. This should be a 128-bit, 192-bit or 256-bit key based on the algorithm used. If this option is not specified, public key encryption will be used instead.
 </dd>
 <dt>
  <code>
   sharedkey_algorithm
  </code>
 </dt>
 <dd>
  Algorithm which should be used for decryption. Possible values are:
 </dd>
</dl>
<ul>
 <li>
  <code>
   http://www.w3.org/2001/04/xmlenc#aes128-cbc
  </code>
 </li>
 <li>
  <code>
   http://www.w3.org/2001/04/xmlenc#aes192-cbc
  </code>
 </li>
 <li>
  <code>
   http://www.w3.org/2001/04/xmlenc#aes256-cbc
  </code>
 </li>
 <li>
  <code>
   http://www.w3.org/2009/xmlenc11#aes128-gcm
  </code>
 </li>
 <li>
  <code>
   http://www.w3.org/2009/xmlenc11#aes192-gcm
  </code>
 </li>
 <li>
  <code>
   http://www.w3.org/2009/xmlenc11#aes256-gcm
  </code>
 </li>
</ul>
<h3 id="fields-for-signing-and-validating-messages">
 Fields for signing and validating messages
</h3>
<p>
 SimpleSAMLphp only signs authentication responses by default. Signing of authentication request, logout requests and logout responses can be enabled by setting the
 <code>
  redirect.sign
 </code>
 option. Validation of received messages can be enabled by the
 <code>
  redirect.validate
 </code>
 option.
</p>
<dl>
 <dt>
  <code>
   redirect.sign
  </code>
 </dt>
 <dd>
  Whether authentication request, logout requests and logout responses sent to this IdP should be signed. The default is
  <code>
   FALSE
  </code>
  .
 </dd>
 <dt>
  <code>
   redirect.validate
  </code>
 </dt>
 <dd>
  Whether logout requests and logout responses received from this IdP should be validated. The default is
  <code>
   FALSE
  </code>
  .
 </dd>
</dl>
<p>
 <strong>
  Example: Configuration for validating messages
 </strong>
 :
</p>
<div class="highlight">
 <pre><span></span><code><span class="x">'redirect.validate' =&gt; true,</span>
<span class="x">'certificate' =&gt; 'example.org.crt',</span>
</code></pre>
</div>
</main></body>
</html>
